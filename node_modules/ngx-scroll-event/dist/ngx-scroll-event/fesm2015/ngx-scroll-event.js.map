{"version":3,"file":"ngx-scroll-event.js","sources":["../../../projects/ngx-scroll-event/src/lib/ngx-scroll-event.directive.ts","../../../projects/ngx-scroll-event/src/lib/ngx-scroll-event.module.ts","../../../projects/ngx-scroll-event/src/public-api.ts","../../../projects/ngx-scroll-event/src/ngx-scroll-event.ts"],"sourcesContent":["import { Directive, HostListener, Output, EventEmitter, Input } from '@angular/core';\n\nexport type NgxScrollEvent = {\n  isReachingBottom: boolean,\n  isReachingTop: boolean,\n  originalEvent: Event,\n  isWindowEvent: boolean\n};\n\ndeclare const window: Window;\n\n@Directive({\n  selector: '[libScrollEvent]'\n})\nexport class NgxScrollEventDirective {\n  @Output() public onscroll = new EventEmitter<NgxScrollEvent>();\n  @Input() public bottomOffset = 100;\n  @Input() public topOffset = 100;\n\n  constructor() { }\n\n  // handle host scroll\n  @HostListener('scroll', ['$event']) public scrolled($event: Event): void {\n    this.elementScrollEvent($event);\n  }\n\n  // handle window scroll\n  @HostListener('window:scroll', ['$event']) public windowScrolled($event: Event): void {\n    this.windowScrollEvent($event);\n  }\n\n  protected windowScrollEvent($event: Event): void {\n    const target = $event.target as Document;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n    const isReachingTop = scrollTop < this.topOffset;\n    const isReachingBottom = ( target.body.offsetHeight - (window.innerHeight + scrollTop) ) < this.bottomOffset;\n    const emitValue: NgxScrollEvent = {isReachingBottom, isReachingTop, originalEvent: $event, isWindowEvent: true};\n    this.onscroll.emit(emitValue);\n  }\n\n  protected elementScrollEvent($event: Event): void {\n    const target = $event.target as HTMLElement;\n    const scrollPosition = target.scrollHeight - target.scrollTop;\n    const offsetHeight = target.offsetHeight;\n    const isReachingTop = target.scrollTop < this.topOffset;\n    const isReachingBottom = (scrollPosition - offsetHeight) < this.bottomOffset;\n    const emitValue: NgxScrollEvent = {isReachingBottom, isReachingTop, originalEvent: $event, isWindowEvent: false};\n    this.onscroll.emit(emitValue);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxScrollEventDirective } from './ngx-scroll-event.directive';\n\n@NgModule({\n  declarations: [NgxScrollEventDirective],\n  imports: [\n  ],\n  exports: [NgxScrollEventDirective]\n})\nexport class NgxScrollEventModule { }\n","/*\n * Public API Surface of ngx-scroll-event\n */\n\nexport * from './lib/ngx-scroll-event.directive';\nexport * from './lib/ngx-scroll-event.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;MAca,uBAAuB;IAKlC;QAJiB,aAAQ,GAAG,IAAI,YAAY,EAAkB,CAAC;QAC/C,iBAAY,GAAG,GAAG,CAAC;QACnB,cAAS,GAAG,GAAG,CAAC;KAEf;;IAG0B,QAAQ,CAAC,MAAa;QAC/D,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;KACjC;;IAGiD,cAAc,CAAC,MAAa;QAC5E,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;KAChC;IAES,iBAAiB,CAAC,MAAa;QACvC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAkB,CAAC;QACzC,MAAM,SAAS,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC;QAC3G,MAAM,aAAa,GAAG,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACjD,MAAM,gBAAgB,GAAG,CAAE,MAAM,CAAC,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,WAAW,GAAG,SAAS,CAAC,IAAK,IAAI,CAAC,YAAY,CAAC;QAC7G,MAAM,SAAS,GAAmB,EAAC,gBAAgB,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,EAAE,aAAa,EAAE,IAAI,EAAC,CAAC;QAChH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAC/B;IAES,kBAAkB,CAAC,MAAa;QACxC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAqB,CAAC;QAC5C,MAAM,cAAc,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC;QAC9D,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;QACzC,MAAM,aAAa,GAAG,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACxD,MAAM,gBAAgB,GAAG,CAAC,cAAc,GAAG,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;QAC7E,MAAM,SAAS,GAAmB,EAAC,gBAAgB,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,EAAE,aAAa,EAAE,KAAK,EAAC,CAAC;QACjH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAC/B;;;YArCF,SAAS,SAAC;gBACT,QAAQ,EAAE,kBAAkB;aAC7B;;;;uBAEE,MAAM;2BACN,KAAK;wBACL,KAAK;uBAKL,YAAY,SAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC;6BAKjC,YAAY,SAAC,eAAe,EAAE,CAAC,QAAQ,CAAC;;;MClB9B,oBAAoB;;;YANhC,QAAQ,SAAC;gBACR,YAAY,EAAE,CAAC,uBAAuB,CAAC;gBACvC,OAAO,EAAE,EACR;gBACD,OAAO,EAAE,CAAC,uBAAuB,CAAC;aACnC;;;ACRD;;;;ACAA;;;;;;"}