{"version":3,"file":"ngx-scroll-event.umd.js","sources":["../../../projects/ngx-scroll-event/src/lib/ngx-scroll-event.directive.ts","../../../projects/ngx-scroll-event/src/lib/ngx-scroll-event.module.ts","../../../projects/ngx-scroll-event/src/public-api.ts","../../../projects/ngx-scroll-event/src/ngx-scroll-event.ts"],"sourcesContent":["import { Directive, HostListener, Output, EventEmitter, Input } from '@angular/core';\n\nexport type NgxScrollEvent = {\n  isReachingBottom: boolean,\n  isReachingTop: boolean,\n  originalEvent: Event,\n  isWindowEvent: boolean\n};\n\ndeclare const window: Window;\n\n@Directive({\n  selector: '[libScrollEvent]'\n})\nexport class NgxScrollEventDirective {\n  @Output() public onscroll = new EventEmitter<NgxScrollEvent>();\n  @Input() public bottomOffset = 100;\n  @Input() public topOffset = 100;\n\n  constructor() { }\n\n  // handle host scroll\n  @HostListener('scroll', ['$event']) public scrolled($event: Event): void {\n    this.elementScrollEvent($event);\n  }\n\n  // handle window scroll\n  @HostListener('window:scroll', ['$event']) public windowScrolled($event: Event): void {\n    this.windowScrollEvent($event);\n  }\n\n  protected windowScrollEvent($event: Event): void {\n    const target = $event.target as Document;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n    const isReachingTop = scrollTop < this.topOffset;\n    const isReachingBottom = ( target.body.offsetHeight - (window.innerHeight + scrollTop) ) < this.bottomOffset;\n    const emitValue: NgxScrollEvent = {isReachingBottom, isReachingTop, originalEvent: $event, isWindowEvent: true};\n    this.onscroll.emit(emitValue);\n  }\n\n  protected elementScrollEvent($event: Event): void {\n    const target = $event.target as HTMLElement;\n    const scrollPosition = target.scrollHeight - target.scrollTop;\n    const offsetHeight = target.offsetHeight;\n    const isReachingTop = target.scrollTop < this.topOffset;\n    const isReachingBottom = (scrollPosition - offsetHeight) < this.bottomOffset;\n    const emitValue: NgxScrollEvent = {isReachingBottom, isReachingTop, originalEvent: $event, isWindowEvent: false};\n    this.onscroll.emit(emitValue);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxScrollEventDirective } from './ngx-scroll-event.directive';\n\n@NgModule({\n  declarations: [NgxScrollEventDirective],\n  imports: [\n  ],\n  exports: [NgxScrollEventDirective]\n})\nexport class NgxScrollEventModule { }\n","/*\n * Public API Surface of ngx-scroll-event\n */\n\nexport * from './lib/ngx-scroll-event.directive';\nexport * from './lib/ngx-scroll-event.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","Directive","Output","Input","HostListener","NgModule"],"mappings":";;;;;;;QAmBE;YAJiB,aAAQ,GAAG,IAAIA,iBAAY,EAAkB,CAAC;YAC/C,iBAAY,GAAG,GAAG,CAAC;YACnB,cAAS,GAAG,GAAG,CAAC;SAEf;;QAG0B,0CAAQ,GAAR,UAAS,MAAa;YAC/D,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;SACjC;;QAGiD,gDAAc,GAAd,UAAe,MAAa;YAC5E,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;SAChC;QAES,mDAAiB,GAAjB,UAAkB,MAAa;YACvC,IAAM,MAAM,GAAG,MAAM,CAAC,MAAkB,CAAC;YACzC,IAAM,SAAS,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC;YAC3G,IAAM,aAAa,GAAG,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACjD,IAAM,gBAAgB,GAAG,CAAE,MAAM,CAAC,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,WAAW,GAAG,SAAS,CAAC,IAAK,IAAI,CAAC,YAAY,CAAC;YAC7G,IAAM,SAAS,GAAmB,EAAC,gBAAgB,kBAAA,EAAE,aAAa,eAAA,EAAE,aAAa,EAAE,MAAM,EAAE,aAAa,EAAE,IAAI,EAAC,CAAC;YAChH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC/B;QAES,oDAAkB,GAAlB,UAAmB,MAAa;YACxC,IAAM,MAAM,GAAG,MAAM,CAAC,MAAqB,CAAC;YAC5C,IAAM,cAAc,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC;YAC9D,IAAM,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;YACzC,IAAM,aAAa,GAAG,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACxD,IAAM,gBAAgB,GAAG,CAAC,cAAc,GAAG,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;YAC7E,IAAM,SAAS,GAAmB,EAAC,gBAAgB,kBAAA,EAAE,aAAa,eAAA,EAAE,aAAa,EAAE,MAAM,EAAE,aAAa,EAAE,KAAK,EAAC,CAAC;YACjH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC/B;;;;gBArCFC,cAAS,SAAC;oBACT,QAAQ,EAAE,kBAAkB;iBAC7B;;;;2BAEEC,WAAM;+BACNC,UAAK;4BACLA,UAAK;2BAKLC,iBAAY,SAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC;iCAKjCA,iBAAY,SAAC,eAAe,EAAE,CAAC,QAAQ,CAAC;;;;QClB3C;;;;;gBANCC,aAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,uBAAuB,CAAC;oBACvC,OAAO,EAAE,EACR;oBACD,OAAO,EAAE,CAAC,uBAAuB,CAAC;iBACnC;;;ICRD;;;;ICAA;;;;;;;;;;;;;;;"}